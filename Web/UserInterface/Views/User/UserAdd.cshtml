@model KSAA.User.Application.DTOs.User.UserViewModel

<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div>
            <div class="panel-heading">
                <div class="clearfix">
                    <a href="~/User/UserList" class="btn btn-primary btn-outline fancy-button btn-0" style="color: black; float: right;">Manage Users</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Row -->
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <h6 class="txt-dark capitalize-font"><i class="zmdi zmdi-account mr-10"></i>Add User Form Details</h6>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-wrap">
                                <form class="form-horizontal" method="post" asp-action="UserAdd" id="frmUserAdd" name="frmUserAdd">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <div class="control-label col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <div class="input-group">
                                                            <div class="input-group-addon"><i class="ti-user"></i></div>
                                                            <input type="text" class="form-control" value="@Model.FirstName" id="txtFirstName" placeholder="Enter First Name" required>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--/span-->
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <div class="control-label col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <div class="input-group">
                                                            <div class="input-group-addon"><i class="ti-email"></i></div>
                                                            <input type="text" class="form-control" value="@Model.Email" id="txtEmail" placeholder="Enter Email" required>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>
                                        <!-- /Row -->
                                        <div class="row">
                                             <div class="col-md-6">
                                                <div class="form-group">
                                                    <div class="control-label col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <div class="input-group">
                                                            <div class="input-group-addon"><i class="ti-user"></i></div>
                                                            <input type="text" class="form-control" value="@Model.LastName" id="txtLastName" placeholder="Enter Last Name" required>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--/span-->
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <div class="control-label col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <div class="input-group">
                                                            <div class="input-group-addon"><i class="ti-lock"></i></div>
                                                            <input type="password" class="form-control" id="txtPassword" placeholder="Enter Password" value="@Model.Password" required>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>

                                        <!-- /Row -->
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <div class="control-label col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <div class="input-group">
                                                            <select class="selectpicker" id="ddlUserType" data-style="form-control btn-default btn-outline">
                                                                <option value=""> ----- Select User Type ----- </option>
                                                                <option value="1">Internal</option>
                                                                <option value="2">Customer</option>
                                                                <option value="3">Consultant</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--/span-->
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <div class="control-label col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <div class="input-group">
                                                            <div class="input-group-addon"><i class="ti-lock"></i></div>
                                                            <input type="password" class="form-control" id="txtConfirmPassword" onChange="checkPasswordMatch();" placeholder="Enter Confirm Password" value="@Model.Password" required="">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>

                                        <!-- /Row -->
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <div class="control-label col-md-3"></div>
                                                    <div class="col-md-9">
                                                        <div class="input-group">
                                                            <select class="selectpicker" id="ddlCompany" data-style="form-control btn-default btn-outline">
                                                                <option value=""> ----- Select Company ----- </option>
                                                                <option value="Mustard">Mustard</option>
                                                                <option value="Ketchup">Ketchup</option>
                                                                <option value="Relish">Relish</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>
                                        <div class="form-actions mt-10">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="row">
                                                        <div class="col-md-offset-3 col-md-9">
                                                            <button type="submit" class="btn btn-success  mr-10">Submit</button>
                                                            <button type="button" class="btn btn-default">Cancel</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6"> </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /Row -->

@section scripts{
<script>

    $("form[name='frmUserAdd']").validate({
    ignore: [],
    errorElement: "div",
    errorPlacement: function (error, element) {
        error.appendTo(element.parent());
    },
    submitHandler: function () {
        var obj = {
            FirstName: $("#txtFirstName").val(),
            LastName: $("#txtLastName").val(),
            Email: $("#txtEmailAddress").val(),
            Password: $("#txtPassword").val(),
            Password: $("#txtConfirmPassword").val(),
            UserType: $("#ddlUserType").val(),
            Company: $("#ddlCompany").val()
        };

        $.ajax({
            type: "POST",
            url: "" + $('#hdnPath').val() + "/User/UserAdd/",
            data: JSON.stringify(obj),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
            beforeSend: function () {
                addRemoveLoader(false);
            },
            success: function (responses) {
                if (responses.success) {
                    //toastr.success(responses.message);
                    Swal.fire({
                        title: "Success!", text: "Your user details stored successfully!", type: "success", confirmButtonColor: "#556ee6", allowOutsideClick: !1
                    }).then(function (t) {
                        if (t.value) {
                            close();
                            //window.location.href = $('#hdnPath').val() + "/User";
                        }
                    });
                }
                else {
                    toastr.error(responses.message);
                }
            },
            error: function (response) {
                toastr.error("Error");
            },
            complete: function () {
                addRemoveLoader(true);
            },
        });
    }
});

function checkPasswordMatch() {
            var password = $("#txtPassword").val();
            var confirmPassword = $("#txtConfirmPassword").val();

            if (password != confirmPassword) {
                $("#msg").html("Passwords do not match!").css("color", "red");
                //$("btnSubmit").has(has('button[type=submit]:checked:enabled'));
                $("#btnSubmit").prop("disabled", true);
            }
            else {
                $("#msg").html("Passwords match.").css("color", "green");
                $("#btnSubmit").prop("disabled", false);
            }
        }

//$(document).ready(function () {
//            if ('@Model.UserType' != null && '@Model.UserType' != "") {
//                $('#ddlUserType').val('@Model.UserType');
//                $('#ddlUserType').select2().trigger('change');
//            }

//            if ('@Model.Company' != null && '@Model.Company' != "") {
//                $('#ddlCompany').val('@Model.Company');
//                $('#ddlCompany').select2().trigger('change');
//            }

//        };

</script>
}